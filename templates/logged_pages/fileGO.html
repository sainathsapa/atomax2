{% include '../head.html' %}

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">
        {% include './sidebar.html' %}

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                {%include './topbar.html'%}
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <h1 class="h3 mb-2 text-gray">Summary from File</h1>
                    <!-- <p class="mb-4">You fetched summary</p> -->

                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <!-- <h6 class="m-0 font-weight-bold text-dark">DataTables Example</h6> -->
                        </div>
                        <div class="card-body">
                            <form class="form-horizontal" role="form" action="go" method="post"
                                enctype="multipart/form-data">
                                {%csrf_token%}
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="summary_text" class="text-dark">File Upload :</label>
                                        <input type="file" class="form-control" name="uploadedFile" id="fileUpload"
                                            placeholder="Upload file" onchange="checkFileEXT(this.value);" required
                                            accept="application/pdf,application/msword,text/plain, text/csv, .docx, .wav, .mp4, .mov, .avi, .wmv" />
                                    </div>

                                    <div class="col-md-6 lang" style="visibility: hidden;">
                                        <label for="language">Select Language :</label>
                                        <select type="text" class="form-control" name="language" id="lang">
                                            <option value="te-In">Telugu - తెలుగు</option>
                                            <option value="hi-In">Hindi - हिन्दी </option>
                                            <option value="en-In">English - English </option>
                                            <option value="ur-IN">Urdu - اردو </option>
                                            <option value="ta-In">Tamil - தமிழ் </option>
                                            <option value="kn-In">Kannada - ಕನ್ನಡ </option>
                                            <option value="mr-IN">Marthi - मराठी </option>
                                            <option value="pa-Guru-In">Punjabi - ਪੰਜਾਬੀ </option>
                                            <option value="gu-In">Gujrathi - ગુજરાતી </option>
                                        </select>
                                    </div>

                                </div>

                                <br />

                                <span class="alert alert-danger my-1" id="msgFileType">Supported file types -
                                    .docx, .pdf, .txt, .csv, .wav </span> <br />
                                <br>
                                <button type="submit" value="submit" id="tweet_btn" class="btn btn-primary">
                                    <i class="fa-solid fa-upload"></i> Upload</button>
                            </form>
                        </div>
                    </div>

                </div>
                <!-- /.container-fluid -->
                {% include '../footer.html' %}
            </div>
            <!-- End of Main Content -->

            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>

    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>


    <script>
        $("#msgFileType").css('display', 'none');
        function checkFileEXT(filename) {
            var ext = '.' + filename.split('.').pop();
            var definedFileType = ['.docx', '.doc', '.pdf', '.txt', '.csv', '.wav', '.mp4', '.wmv', '.avi']
            if (!definedFileType.includes(ext)) {
                $("#msgFileType").css('display', 'block');
                $("#tweet_btn").attr('disabled', 'disabled');
                $(".lang").css("visibility", "hidden");



            }
            else if (ext == '.wav' || ext == '.mp4' || ext == '.wmv' || ext == '.avi') {
                $(".lang").css("visibility", "visible");
            }
            else {
                $("#msgFileType").css('display', 'none');
                $("#tweet_btn").attr('disabled', false);
                $(".lang").css("visibility", "hidden");


            }
        }


    </script>